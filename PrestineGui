local config = {
	tabs = {
		{
			name = "Main",
			toggles = {
				{name = "Auto Collect Relics", action = function() print("Auto Collect Relics toggled") end},
				{name = "Auto Collect Lootbags", action = function() print("Auto Collect Lootbags toggled") end},
			}
		},
		{
			name = "Automatic",
			toggles = {
				{name = "Auto Attack", action = function() print("Auto Attack toggled") end},
				{name = "Auto Defend", action = function() print("Auto Defend toggled") end},
			}
		},
		{
			name = "Misc",
			toggles = {
				{name = "Enable Chat Logger", action = function() print("Enable Chat Logger toggled") end},
			}
		},
		{
			name = "Others",
			toggles = {
				{name = "Free Camera", action = function() print("Free Camera toggled") end},
			}
		},
	}
}

local ScreenGui = Instance.new("ScreenGui")
local MainFrame = Instance.new("Frame")
local UICorner = Instance.new("UICorner")
local TitleLabel = Instance.new("TextLabel")
local TabButtonsFrame = Instance.new("Frame")
local MainTabButton, AutomaticTabButton, MiscTabButton, OthersTabButton
local TabContentFrame = Instance.new("ScrollingFrame")
local ToggleButton = Instance.new("ImageButton")
local UserInputService = game:GetService("UserInputService")
local Player = game.Players.LocalPlayer
local dragging, dragInput, dragStart, startPos
local toggleDragging, toggleDragInput, toggleDragStart, toggleStartPos

ScreenGui.Name = "Prestine"
ScreenGui.Parent = Player:WaitForChild("PlayerGui")

MainFrame.Name = "MainFrame"
MainFrame.Size = UDim2.new(0, 400, 0, 350)
MainFrame.Position = UDim2.new(0.5, -200, 0.5, -175)
MainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
MainFrame.BorderSizePixel = 0
MainFrame.BackgroundTransparency = 0.1
MainFrame.Parent = ScreenGui
UICorner.Parent = MainFrame

local UIStroke = Instance.new("UIStroke")
UIStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
UIStroke.Color = Color3.fromRGB(0, 150, 255)
UIStroke.Thickness = 3
UIStroke.Parent = MainFrame

TitleLabel.Name = "Prestine"
TitleLabel.Size = UDim2.new(1, 0, 0, 40)
TitleLabel.BackgroundColor3 = Color3.fromRGB(0, 150, 255)
TitleLabel.BorderSizePixel = 0
TitleLabel.Text = "Prestine GUI"
TitleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
TitleLabel.TextSize = 26
TitleLabel.Font = Enum.Font.GothamBold
TitleLabel.Parent = MainFrame

ToggleButton.Name = "ToggleButton"
ToggleButton.Parent = ScreenGui
ToggleButton.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
ToggleButton.BorderColor3 = Color3.fromRGB(0, 0, 0)
ToggleButton.BorderSizePixel = 0
ToggleButton.Position = UDim2.new(0.02, 0, 0.5, -27.5)
ToggleButton.Size = UDim2.new(0, 55, 0, 55)
ToggleButton.Image = "http://www.roblox.com/asset/?id=98996162631897"

local toggleSound = Instance.new("Sound")
toggleSound.SoundId = "rbxassetid://9120299508"
toggleSound.Parent = ToggleButton

local toggleUICorner = Instance.new("UICorner")
toggleUICorner.Parent = ToggleButton

local guiVisible = true

ToggleButton.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 then
		toggleDragging = true
		toggleDragStart = input.Position
		toggleStartPos = ToggleButton.Position
		input.Changed:Connect(function()
			if input.UserInputState == Enum.UserInputState.End then
				toggleDragging = false
			end
		end)

		if guiVisible then
			MainFrame.Visible = false
			guiVisible = false
		else
			MainFrame.Visible = true
			guiVisible = true
		end

		toggleSound:Play()
	end
end)

ToggleButton.InputChanged:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseMovement then
		toggleDragInput = input
	end
end)

UserInputService.InputChanged:Connect(function(input)
	if toggleDragging and input == toggleDragInput then
		local delta = input.Position - toggleDragStart
		ToggleButton.Position = UDim2.new(toggleStartPos.X.Scale, toggleStartPos.X.Offset + delta.X, toggleStartPos.Y.Scale, toggleStartPos.Y.Offset + delta.Y)
	end
end)

MainFrame.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 then
		dragging = true
		dragStart = input.Position
		startPos = MainFrame.Position
		input.Changed:Connect(function()
			if input.UserInputState == Enum.UserInputState.End then
				dragging = false
			end
		end)
	end
end)

MainFrame.InputChanged:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseMovement then
		dragInput = input
	end
end)

UserInputService.InputChanged:Connect(function(input)
	if dragging and input == dragInput then
		local delta = input.Position - dragStart
		MainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
	end
end)

TabButtonsFrame.Name = "TabButtonsFrame"
TabButtonsFrame.Size = UDim2.new(1, 0, 0, 40)
TabButtonsFrame.Position = UDim2.new(0, 0, 0, 40)
TabButtonsFrame.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
TabButtonsFrame.Parent = MainFrame

local function createTabButton(name, position)
	local button = Instance.new("TextButton")
	button.Name = name .. "Button"
	button.Size = UDim2.new(0, 100, 1, 0)
	button.Position = position
	button.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
	button.BorderSizePixel = 0
	button.Text = name
	button.TextColor3 = Color3.fromRGB(255, 255, 255)
	button.TextSize = 18
	button.Font = Enum.Font.Gotham
	button.AutoButtonColor = false

	button.MouseEnter:Connect(function()
		button.BackgroundColor3 = Color3.fromRGB(90, 90, 90)
	end)

	button.MouseLeave:Connect(function()
		if not button.Selected then
			button.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
		end
	end)

	button.MouseButton1Click:Connect(function()
		local clickSound = Instance.new("Sound")
		clickSound.SoundId = "rbxassetid://9126016593"
		clickSound.Parent = button
		clickSound:Play()
	end)

	button.Parent = TabButtonsFrame
	return button
end

for i, tab in ipairs(config.tabs) do
	local position = UDim2.new(0, (i - 1) * 100, 0, 0)
	if i == 1 then
		MainTabButton = createTabButton(tab.name, position)
	elseif i == 2 then
		AutomaticTabButton = createTabButton(tab.name, position)
	elseif i == 3 then
		MiscTabButton = createTabButton(tab.name, position)
	elseif i == 4 then
		OthersTabButton = createTabButton(tab.name, position)
	end
end

TabContentFrame.Name = "TabContentFrame"
TabContentFrame.Size = UDim2.new(1, 0, 1, -80)
TabContentFrame.Position = UDim2.new(0, 0, 0, 80)
TabContentFrame.BackgroundColor3 = Color3.fromRGB(50, 150, 150)
TabContentFrame.BackgroundTransparency = 0.25
TabContentFrame.BorderSizePixel = 0
TabContentFrame.CanvasSize = UDim2.new(0, 0, 2, 0)
TabContentFrame.ScrollBarThickness = 6
TabContentFrame.ScrollingDirection = Enum.ScrollingDirection.Y
TabContentFrame.Parent = MainFrame

local function createToggleButton(name, action, position)
	local frame = Instance.new("Frame")
	frame.Size = UDim2.new(1, 0, 0, 50)
	frame.Position = position
	frame.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
	frame.BorderSizePixel = 0
	frame.Parent = TabContentFrame

	local toggleUICorner = Instance.new("UICorner")
	toggleUICorner.Parent = frame

	local label = Instance.new("TextLabel")
	label.Text = name
	label.Size = UDim2.new(0.8, 0, 1, 0)
	label.Position = UDim2.new(0, 10, 0, 0)
	label.TextColor3 = Color3.fromRGB(255, 255, 255)
	label.TextSize = 16
	label.Font = Enum.Font.Gotham
	label.BackgroundTransparency = 1
	label.Parent = frame

	local button = Instance.new("TextButton")
	button.Text = "Off"
	button.Size = UDim2.new(0.2, -10, 0.8, 0)
	button.Position = UDim2.new(0.8, 5, 0.1, 0)
	button.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
	button.TextColor3 = Color3.fromRGB(255, 255, 255)
	button.TextSize = 16
	button.Font = Enum.Font.Gotham
	button.Parent = frame

	local buttonUICorner = Instance.new("UICorner")
	buttonUICorner.Parent = button

	button.MouseButton1Click:Connect(function()
		if button.Text == "Off" then
			button.Text = "On"
			button.BackgroundColor3 = Color3.fromRGB(215, 215, 215)
			action(true)
		else
			button.Text = "Off"
			button.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
			action(false)
		end
	end)
end

for i, toggle in ipairs(config.tabs[1].toggles) do
	local position = UDim2.new(0, 0, 0, (i - 1) * 60)
	createToggleButton(toggle.name, toggle.action, position)
end
local function clearTabContent()
	for _, child in ipairs(TabContentFrame:GetChildren()) do
		if child:IsA("Frame") then
			child:Destroy()
		end
	end
end

local function loadToggles(tab)
	clearTabContent()
	for i, toggle in ipairs(tab.toggles) do
		local position = UDim2.new(0, 0, 0, (i - 1) * 60)
		createToggleButton(toggle.name, toggle.action, position)
	end
end

MainTabButton.MouseButton1Click:Connect(function()
	clearTabContent()
	MainTabButton.BackgroundColor3 = Color3.fromRGB(90, 90, 90)
	loadToggles(config.tabs[1])
end)

AutomaticTabButton.MouseButton1Click:Connect(function()
	clearTabContent()
	AutomaticTabButton.BackgroundColor3 = Color3.fromRGB(90, 90, 90)
	loadToggles(config.tabs[2])
end)

MiscTabButton.MouseButton1Click:Connect(function()
	clearTabContent()
	MiscTabButton.BackgroundColor3 = Color3.fromRGB(90, 90, 90)
	loadToggles(config.tabs[3])
end)

OthersTabButton.MouseButton1Click:Connect(function()
	clearTabContent()
	OthersTabButton.BackgroundColor3 = Color3.fromRGB(90, 90, 90)
	loadToggles(config.tabs[4])
end)
